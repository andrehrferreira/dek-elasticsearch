{"version":3,"sources":["../src/index.js"],"names":["Client6","Client7","env","process","hosts","ELASTICSEARCH_HOST","indexOf","split","elasticsearch","ELASTICSEARCH_VERSION","Client","node","Elasticsearch","DEBUG","console","log","$","set","e","message"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;IAAYA,O;;AACZ;;IAAYC,O;;;;;;kBAEG,YAAM;AACjB,QAAG;AACC,YAAIC,MAAMC,QAAQD,GAAlB;AACA,YAAIE,QAASF,IAAIG,kBAAJ,CAAuBC,OAAvB,CAA+B,GAA/B,IAAsC,CAAC,CAAxC,GAA6CJ,IAAIG,kBAAJ,CAAuBE,KAAvB,CAA6B,GAA7B,CAA7C,GAAiFL,IAAIG,kBAAjG;AACA,YAAIG,gBAAgB,IAApB;;AAEA,gBAAON,IAAIO,qBAAX;AACI,iBAAK,GAAL;AAAUD,gCAAgB,IAAIR,QAAQU,MAAZ,CAAoB,EAAEC,MAAMP,KAAR,EAApB,CAAhB,CAAsD;AAChE,iBAAK,GAAL;AAAUI,gCAAgB,IAAIP,QAAQS,MAAZ,CAAoB,EAAEC,MAAMP,KAAR,EAApB,CAAhB,CAAsD;AAChE;AAASI,gCAAgB,IAAII,wBAAcF,MAAlB,CAA0B,EAAEN,OAAOA,KAAT,EAA1B,CAAhB,CAA6D;AAH1E;;AAMA,YAAGD,QAAQD,GAAR,CAAYW,KAAZ,IAAqB,MAAxB,EACIC,QAAQC,GAAR;;AAEJC,iBAAEC,GAAF,CAAM,eAAN,EAAuBT,aAAvB;AACH,KAfD,CAgBA,OAAOU,CAAP,EAAU;AACNJ,gBAAQC,GAAR,0BAAmCG,EAAEC,OAArC;AACH;AACJ,C","file":"index.js","sourcesContent":["import { $ } from \"@dekproject/scope\";\nimport Elasticsearch from 'elasticsearch';\nimport * as Client6 from 'es6';\nimport * as Client7 from 'es7';\n\nexport default () => {\n    try{\n        let env = process.env;\n        let hosts = (env.ELASTICSEARCH_HOST.indexOf(\",\") > -1) ? env.ELASTICSEARCH_HOST.split(\",\") : env.ELASTICSEARCH_HOST\n        let elasticsearch = null;\n\n        switch(env.ELASTICSEARCH_VERSION){\n            case \"6\": elasticsearch = new Client6.Client( { node: hosts }); break;\n            case \"7\": elasticsearch = new Client7.Client( { node: hosts }); break;\n            default: elasticsearch = new Elasticsearch.Client( { hosts: hosts }); break;\n        }\n\n        if(process.env.DEBUG == 'true')\n            console.log(`[ Elasticsearch ] - Elasticsearch successfully signed`);\n\n        $.set(\"elasticsearch\", elasticsearch);\n    }\n    catch (e) {\n        console.log(`[ Elasticsearch ] - ${e.message}`);\n    }\n}\n"]}